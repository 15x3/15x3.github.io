<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>开发复盘：一周两个Mod，哪些事情做对了，哪些做错了 | 神金</title><meta name="author" content="15x3"><meta name="copyright" content="15x3"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0f0f0f"><meta name="description" content="一周7天完成2个Mod，霸占创意工坊首页整周。作为第一次制作完整游戏系统的尝试，这篇文章描述了我个人在开发结束之后的复盘与反思  上周，我给游戏《潜渊症》（Barotrauma）做的Mod“原版枪械改装”和“武器XML快速生成器”完成了，登顶首页长达一周。  这个mod说大不大说小不小：相当于给这游戏远程武器提供了一套完整的配件改装系统模板——你知道的，就是多数FPS做过的装个镜子、换个枪托这样">
<meta property="og:type" content="article">
<meta property="og:title" content="开发复盘：一周两个Mod，哪些事情做对了，哪些做错了">
<meta property="og:url" content="https://神金.icu/2025/07/27/%E5%BC%80%E5%8F%91%E5%A4%8D%E7%9B%98%EF%BC%9A%E4%B8%80%E5%91%A8%E4%B8%A4%E4%B8%AAMod%EF%BC%8C%E5%93%AA%E4%BA%9B%E4%BA%8B%E6%83%85%E5%81%9A%E5%AF%B9%E4%BA%86%EF%BC%8C%E5%93%AA%E4%BA%9B%E5%81%9A%E9%94%99%E4%BA%86/index.html">
<meta property="og:site_name" content="神金">
<meta property="og:description" content="一周7天完成2个Mod，霸占创意工坊首页整周。作为第一次制作完整游戏系统的尝试，这篇文章描述了我个人在开发结束之后的复盘与反思  上周，我给游戏《潜渊症》（Barotrauma）做的Mod“原版枪械改装”和“武器XML快速生成器”完成了，登顶首页长达一周。  这个mod说大不大说小不小：相当于给这游戏远程武器提供了一套完整的配件改装系统模板——你知道的，就是多数FPS做过的装个镜子、换个枪托这样">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2025-07-26T20:37:10.000Z">
<meta property="article:modified_time" content="2025-07-26T20:38:01.000Z">
<meta property="article:author" content="15x3">
<meta property="article:tag" content="复盘">
<meta property="article:tag" content="游戏开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "开发复盘：一周两个Mod，哪些事情做对了，哪些做错了",
  "url": "https://神金.icu/2025/07/27/%E5%BC%80%E5%8F%91%E5%A4%8D%E7%9B%98%EF%BC%9A%E4%B8%80%E5%91%A8%E4%B8%A4%E4%B8%AAMod%EF%BC%8C%E5%93%AA%E4%BA%9B%E4%BA%8B%E6%83%85%E5%81%9A%E5%AF%B9%E4%BA%86%EF%BC%8C%E5%93%AA%E4%BA%9B%E5%81%9A%E9%94%99%E4%BA%86/",
  "image": "https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png",
  "datePublished": "2025-07-26T20:37:10.000Z",
  "dateModified": "2025-07-26T20:38:01.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "15x3",
      "url": "https://神金.icu/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/xiangsu_jinbi.svg"><link rel="canonical" href="https://神金.icu/2025/07/27/%E5%BC%80%E5%8F%91%E5%A4%8D%E7%9B%98%EF%BC%9A%E4%B8%80%E5%91%A8%E4%B8%A4%E4%B8%AAMod%EF%BC%8C%E5%93%AA%E4%BA%9B%E4%BA%8B%E6%83%85%E5%81%9A%E5%AF%B9%E4%BA%86%EF%BC%8C%E5%93%AA%E4%BA%9B%E5%81%9A%E9%94%99%E4%BA%86/index.html"><link rel="preconnect" href="//cdnjs.cloudflare.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0f0f0f')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdnjs.cloudflare.com/ajax/libs/egjs-infinitegrid/4.12.0/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '开发复盘：一周两个Mod，哪些事情做对了，哪些做错了',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="https://unpkg.com/webfont-clfn-bitmap@1.0.1/fonts.css"><link rel="stylesheet" href="https://unpkg.com/webfont-classic-console-bitmap@1.0.0/font.css"><link rel="stylesheet" href="https://unpkg.com/@hackernoon/pixel-icon-library/fonts/iconfont.css"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (true) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw hn hn-home-solid"></i><span> 首页啊嗯</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw hn hn-newspaper-solid"></i><span> 巨魔文章</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw hn hn-user-solid"></i><span> 谁是神人</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/xiangsu_jinbi.svg" alt="Logo"><span class="site-name">神金</span></a><a class="nav-page-title" href="/"><span class="site-name">开发复盘：一周两个Mod，哪些事情做对了，哪些做错了</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw hn hn-home-solid"></i><span> 首页啊嗯</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw hn hn-newspaper-solid"></i><span> 巨魔文章</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw hn hn-user-solid"></i><span> 谁是神人</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">开发复盘：一周两个Mod，哪些事情做对了，哪些做错了</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-26T20:37:10.000Z" title="发表于 2025-07-27 04:37:10">2025-07-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-26T20:38:01.000Z" title="更新于 2025-07-27 04:38:01">2025-07-27</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:730,&quot;messagePrev&quot;:&quot;本文章离上次更新已经过&quot;,&quot;messageNext&quot;:&quot;天，内容可能已过时，请注意识别。&quot;,&quot;postUpdate&quot;:&quot;2025-07-27 04:38:01&quot;}" hidden></div><blockquote>
<p>一周7天完成2个Mod，霸占创意工坊首页整周。作为第一次制作完整游戏系统的尝试，这篇文章描述了我个人在开发结束之后的复盘与反思</p>
</blockquote>
<p>上周，我给游戏《潜渊症》（Barotrauma）做的Mod“原版枪械改装”和“武器XML快速生成器”完成了，登顶首页长达一周。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.神金.icu/Snipaste_2025-07-24_23-14-16.png" alt="Snipaste_2025-07-24_23-14-16.png"></p>
<p>这个mod说大不大说小不小：相当于给这游戏远程武器提供了一套完整的配件改装系统模板——你知道的，就是多数FPS做过的装个镜子、换个枪托这样的玩意，并且还把性能优化到了当前我力作能及的最大极限。我不好说它是不是还能再优化，但是整个游戏因为一把枪装了消音器就从60帧掉到30帧这种事情应该是不会出现了（点名这个游戏的另一个Mod：Combat Extended，有很长一段时间都有这种问题）。不过我并没有覆盖到游戏里的所有武器，目前只有三分之二。</p>
<p>至于另一个Mod“武器XML生成器”，基本就是开发配件系统时的附带产品。</p>
<p>在这之前，我尚未接触过完整的游戏开发，虽然参与过3、4次gamejam，但总的来说我没有感觉到自己以前的开发很有组织性，更多时候就像《游戏制作指南》里说的那样：在Deadline的三分之二时间里磨洋工、出于“必要混乱”之中，直到剩下一周或者几天时，“哦，糟糕”，发现自己要赶不上Deadline，才火速从“必要混乱”当中脱出身来，开始给自己的一团浆糊各种找补，最后端上来个四不像。</p>
<p>先从开发日志开始吧。</p>
<h2 id="开发日志"><a href="#开发日志" class="headerlink" title="开发日志"></a>开发日志</h2><h3 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h3><ul>
<li>初步上手</li>
<li>成功实现更为优雅简洁的配件机制</li>
</ul>
<p>我需要开始考虑一下接下来怎么做战术插件.目前是考虑改造分为两类:战术化和暴力改造,前者就是原武器增加多个插件槽位,而后面的改造则是直接重写一个新武器出来.</p>
<p>对于插件槽位,目前的想法如下:</p>
<p>能影响的属性:</p>
<ul>
<li>reload &amp; reloadnoskill 射速与无技能射速 (需要reloadskillrequirement)</li>
<li>weapondamagemodifier 武器伤害倍率 </li>
<li>penetration 护甲&#x2F;结构伤害乘数 </li>
<li>barrelpos 枪管位置 </li>
<li>spread &amp; unskilledspread 散布和无技能散布 </li>
<li>crosshairscale 十字准星大小</li>
<li>移动速度</li>
</ul>
<p>具体见 <a target="_blank" rel="noopener" href="https://regalis11.github.io/BaroModDoc/ItemComponents/RangedWeapon.html">https://regalis11.github.io/BaroModDoc/ItemComponents/RangedWeapon.html</a></p>
<ol>
<li>上插件 | 镭射&#x2F;灯光&#x2F;发光管&#x2F;瞄准镜等 | smallScopeVGM,bigScopeVGM</li>
<li>枪管 | 消声器&#x2F;消焰器&#x2F;长枪管 | smallMuzzleVGM,bigMuzzleVGM</li>
<li>下挂件 | 除瞄准镜以外的所有上挂件+握把 | smallAccessoryVGM,bigAccessoryVGM</li>
<li>枪托 | 去除枪托&#x2F;轻枪托&#x2F;重枪托 | smallStockVGM,bigStockVGM</li>
</ol>
<!-- 5. 握把 | 人体工程学握把/轻握把/射手握把 | smallHandVGM,bigHandVGM -->
<ol start="5">
<li>内机构 | 灵活度较大 | smallMechanicsVGM,bigMechanicsVGM</li>
<li>弹匣 | 不算在插件系统内,短弹匣&#x2F;长弹匣&#x2F;弹鼓 | smallMagVGM,bigMagVGM,drumMagVGM</li>
</ol>
<p>就先做这些吧, 都是些数值增减, 应该不成问题的</p>
<p>明天得开始处理XML烧火棍生成器了,这下确实有实在的需求在了.</p>
<h3 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h3><p>模板初步实现,做贴图时发现一个问题:配件和枪最好统一配色,不然装上去会显得突兀(尤其是握把部分),嗯,之后所有战术武器全变成暗蓝配色好了</p>
<p>生成器初步完工,不过还需要不少改进,目前生成的代码手动改的部分还挺多，另外最好能把贴图扔到右边，左边一栏右边一栏方便操作</p>
<p>发现枪握把有个问题:握把的实现略有难度:</p>
<ol>
<li>需要独立调整显示层级,得覆盖在枪握把的上面</li>
<li>所有组件都最好比原枪配件大一码,以覆盖原枪</li>
</ol>
<p>后来尝试了一下, subcontainer不响应containedspritedepth这个标签,故因握把贴图实现难度过大的原因,实现得弃用</p>
<h3 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h3><p>枪械配件列表：</p>
<p>上插件：<br>    步枪瞄准镜（原版） 增加武器的最远可视距离（cameraaimoffset）500单位，只有部分武器可用<br>    ACOG瞄准镜 增加武器的最远可视（cameraaimoffset）距离250单位<br>    全息瞄准镜 增加武器的最远可视100单位<br>        - 变种：红点瞄准镜<br>        - 变种：紧凑瞄准镜<br>    狙击瞄准镜 增加武器最远可视距离700单位，只有部分武器可用，影响持握时步行速度</p>
<p>上下兼容插件：<br>    激光瞄准器<br>    手电筒<br>    照明棒<br>    信号弹<br>        -以上物品安装在上插件时会导致准星消失</p>
<p>下插件：<br>    垂直握把 变为战术持握（枪口向下）<br>    直角握把 变为战术持握（枪口向上）</p>
<p>枪管：<br>    消声器 修改武器枪管位置，减少5%散布，增加消音能力，增加5%伤害<br>    消焰器 减少15%散布<br>    长枪管 修改武器枪管位置，增加10%伤害，减少10%移动速度，增大枪口火焰</p>
<p>枪托：<br>    无枪托(默认) 增加30%散布,增加15%移动速度<br>    轻型枪托 有托武器的默认配置<br>    重型枪托 减少5%移动速度，减少5%散布<br>    射手枪托 减少15%移动速度，减少30%散布<br>    （手枪枪托 减少20%散布，但是变为只能双手持握）</p>
<p>第一批贴图完成,只做了一半,主要是确认一下当前这套工作流可行,晚上准备开工处理代码<br>我把以前不知道在哪里找到的旧式工作台搬来了,现在当作这个mod的用好了</p>
<p>哈,幸好只做了一半,果然有坑:<br>xml原生支持增减这些操作,但是不支持TMD逆向操作!啥意思?老子消音器捅上去之后再拔下来,桶上去会给数值,拔下来数值没法变回去!笑死,好吧是可以变回去,用setvalue就行,但是如果一个属性被两种不同的插件影响(比如常见的,散布同时被握把和枪托影响),那逻辑上就会出现问题.</p>
<p>我想了想,这样的话得减一些特性:一个插件可以影响,每个属性只能固定被一种插件定义,</p>
<p>至于剩下的,我想之后学lua的时候试试好了…如果我还有余力去学lua而不是专注Godot的话</p>
<p>我就把话放在这儿了:如果不使用Lua重写的话,这个东西的拓展会很困难.所以等第一版出来以后,尽早用Lua把逻辑重写一遍</p>
<p>原版突击步枪的弹匣怎么贴图位置不对? 这个做完了帮官方修一下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Item</span> <span class="attr">identifier</span>=<span class="string">&quot;tacAssaultRifleVGM&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tacAssaultRifleVGM&quot;</span> <span class="attr">tags</span>=<span class="string">&quot;smallitem,weapon&quot;</span> <span class="attr">category</span>=<span class="string">&quot;Weapon&quot;</span> <span class="attr">scale</span>=<span class="string">&quot;0.5&quot;</span> <span class="attr">impactsoundtag</span>=<span class="string">&quot;impact_metal_light&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- interactdistance=&quot;50&quot; interactpriority=&quot;1.0&quot; interactthroughwalls=&quot;false&quot; focusonselected=&quot;false&quot; offsetonselected=&quot;0&quot; showcontentsintooltip=&quot;false&quot; scale=&quot;1.0&quot; spritecolor=&quot;1.0,1.0,1.0,1.0&quot; health=&quot;100&quot; indestructible=&quot;false&quot; fireproof=&quot;false&quot; waterproof=&quot;false&quot; impacttolerance=&quot;10.0&quot; maxstacksize=&quot;1&quot; allowasextracargo=&quot;false&quot; allowrotatingineditor=&quot;true&quot; linkable=&quot;false&quot;这些都不需要 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Price</span> <span class="attr">baseprice</span>=<span class="string">&quot;666&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Price</span> <span class="attr">storeidentifier</span>=<span class="string">&quot;merchantoutpost&quot;</span> <span class="attr">sold</span>=<span class="string">&quot;false&quot;</span> <span class="attr">multiplier</span>=<span class="string">&quot;1.5&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Price</span> <span class="attr">storeidentifier</span>=<span class="string">&quot;merchantcity&quot;</span> <span class="attr">multiplier</span>=<span class="string">&quot;1.25&quot;</span> <span class="attr">minavailable</span>=<span class="string">&quot;1&quot;</span> <span class="attr">sold</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Price</span> <span class="attr">storeidentifier</span>=<span class="string">&quot;merchantresearch&quot;</span> <span class="attr">sold</span>=<span class="string">&quot;false&quot;</span> <span class="attr">multiplier</span>=<span class="string">&quot;1.25&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Price</span> <span class="attr">storeidentifier</span>=<span class="string">&quot;merchantmilitary&quot;</span> <span class="attr">multiplier</span>=<span class="string">&quot;0.9&quot;</span> <span class="attr">minavailable</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Price</span> <span class="attr">storeidentifier</span>=<span class="string">&quot;merchantmine&quot;</span> <span class="attr">sold</span>=<span class="string">&quot;false&quot;</span> <span class="attr">multiplier</span>=<span class="string">&quot;1.25&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Price</span> <span class="attr">storeidentifier</span>=<span class="string">&quot;merchantarmory&quot;</span> <span class="attr">multiplier</span>=<span class="string">&quot;0.9&quot;</span> <span class="attr">minavailable</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- price需要增加storeidentifier作为子标签 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Price</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Fabricate</span> <span class="attr">requiredtime</span>=<span class="string">&quot;35&quot;</span> <span class="attr">suitablefabricators</span>=<span class="string">&quot;fabricatorVGM&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RequiredItem</span> <span class="attr">identifier</span>=<span class="string">&quot;assaultrifle&quot;</span> <span class="attr">amount</span>=<span class="string">&quot;1&quot;</span> <span class="attr">mincondition</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RequiredItem</span> <span class="attr">identifier</span>=<span class="string">&quot;steel&quot;</span> <span class="attr">amount</span>=<span class="string">&quot;3&quot;</span> <span class="attr">mincondition</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Fabricate</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Deconstruct</span> <span class="attr">time</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Item</span> <span class="attr">identifier</span>=<span class="string">&quot;plastic&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Item</span> <span class="attr">identifier</span>=<span class="string">&quot;titaniumaluminiumalloy&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Deconstruct</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Body</span> <span class="attr">width</span>=<span class="string">&quot;160&quot;</span> <span class="attr">height</span>=<span class="string">&quot;60&quot;</span> <span class="attr">density</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RangedWeapon</span> <span class="attr">reload</span>=<span class="string">&quot;0.24&quot;</span> <span class="attr">weapondamagemodifier</span>=<span class="string">&quot;1.0&quot;</span> <span class="attr">penetration</span>=<span class="string">&quot;&quot;</span> <span class="attr">holdtrigger</span>=<span class="string">&quot;true&quot;</span> <span class="attr">barrelpos</span>=<span class="string">&quot;75,-20&quot;</span> <span class="attr">spread</span>=<span class="string">&quot;6&quot;</span> <span class="attr">unskilledspread</span>=<span class="string">&quot;20&quot;</span> <span class="attr">combatpriority</span>=<span class="string">&quot;80&quot;</span> <span class="attr">drawhudwhenequipped</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Crosshair</span> <span class="attr">texture</span>=<span class="string">&quot;Content/Items/Weapons/Crosshairs.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;0,256,256,256&quot;</span> <span class="attr">scale</span>=<span class="string">&quot;0.2&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CrosshairPointer</span> <span class="attr">texture</span>=<span class="string">&quot;Content/Items/Weapons/Crosshairs.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;256,256,256,256&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RequiredItems</span> <span class="attr">items</span>=<span class="string">&quot;smgammo&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Contained&quot;</span> <span class="attr">msg</span>=<span class="string">&quot;ItemMsgAmmoRequired&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RequiredSkill</span> <span class="attr">identifier</span>=<span class="string">&quot;weapons&quot;</span> <span class="attr">level</span>=<span class="string">&quot;60&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;StatusEffect type=&quot;OnUse&quot; target=&quot;This&quot; Condition=&quot;-0.01&quot; /&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;StatusEffect type=&quot;OnUse&quot; target=&quot;Contained&quot; Condition=&quot;-0.1&quot; /&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;StatusEffect type=&quot;OnUse&quot; target=&quot;Character&quot; DisableDetachment=&quot;true&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;Explosion force=&quot;0&quot; smoke=&quot;true&quot; flames=&quot;false&quot; shockwave=&quot;false&quot; sparks=&quot;false&quot; flash=&quot;false&quot; sound=&quot;SmallWeaponShoot&quot; /&gt;</span></span><br><span class="line"><span class="comment">    &lt;/StatusEffect&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 上面这三行都不需要,请修改成下面这些 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StatusEffect</span> <span class="attr">type</span>=<span class="string">&quot;OnUse&quot;</span> <span class="attr">target</span>=<span class="string">&quot;This&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ParticleEmitter</span> <span class="attr">particle</span>=<span class="string">&quot;casingfirearm&quot;</span> <span class="attr">particleamount</span>=<span class="string">&quot;1&quot;</span> <span class="attr">anglemin</span>=<span class="string">&quot;90&quot;</span> <span class="attr">anglemax</span>=<span class="string">&quot;150&quot;</span> <span class="attr">velocitymin</span>=<span class="string">&quot;50&quot;</span> <span class="attr">velocitymax</span>=<span class="string">&quot;250&quot;</span> <span class="attr">CopyEntityAngle</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Explosion</span> <span class="attr">range</span>=<span class="string">&quot;150.0&quot;</span> <span class="attr">force</span>=<span class="string">&quot;1.5&quot;</span> <span class="attr">shockwave</span>=<span class="string">&quot;false&quot;</span> <span class="attr">smoke</span>=<span class="string">&quot;false&quot;</span> <span class="attr">flames</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sparks</span>=<span class="string">&quot;false&quot;</span> <span class="attr">underwaterbubble</span>=<span class="string">&quot;false&quot;</span> <span class="attr">camerashake</span>=<span class="string">&quot;12.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StatusEffect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StatusEffect</span> <span class="attr">type</span>=<span class="string">&quot;OnUse&quot;</span> <span class="attr">target</span>=<span class="string">&quot;Contained&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Use</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StatusEffect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StatusEffect</span> <span class="attr">type</span>=<span class="string">&quot;OnSecondaryUse&quot;</span> <span class="attr">target</span>=<span class="string">&quot;This&quot;</span> <span class="attr">Condition</span>=<span class="string">&quot;-0.1&quot;</span> <span class="attr">stackable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">disabledeltatime</span>=<span class="string">&quot;true&quot;</span> <span class="attr">setvalue</span>=<span class="string">&quot;false&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RequiredItem</span> <span class="attr">items</span>=<span class="string">&quot;flashlight&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Contained&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StatusEffect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">RangedWeapon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ItemContainer</span> <span class="attr">capacity</span>=<span class="string">&quot;1&quot;</span> <span class="attr">maxstacksize</span>=<span class="string">&quot;1&quot;</span> <span class="attr">hideitems</span>=<span class="string">&quot;false&quot;</span> <span class="attr">containedstateindicatorslot</span>=<span class="string">&quot;0&quot;</span> <span class="attr">containedstateindicatorstyle</span>=<span class="string">&quot;bullet&quot;</span> <span class="attr">containedspritedepth</span>=<span class="string">&quot;0.56&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;SlotIcons&gt;</span></span><br><span class="line"><span class="comment">      &lt;SlotIcon slot=&quot;0&quot; texture=&quot;Content/Items/InventoryIconAtlas.png&quot; sourcerect=&quot;832,830,64,64&quot; /&gt;</span></span><br><span class="line"><span class="comment">      &lt;SlotIcon slot=&quot;1&quot; texture=&quot;Content/UI/StatusMonitorUI.png&quot; sourcerect=&quot;320,448,64,64&quot; /&gt;</span></span><br><span class="line"><span class="comment">      &lt;SlotIcon slot=&quot;3&quot; texture=&quot;%ModDir%/UI/icons.png&quot; sourcerect=&quot;0,64,64,64&quot; /&gt;</span></span><br><span class="line"><span class="comment">      &lt;SlotIcon slot=&quot;4&quot; texture=&quot;%ModDir%/UI/icons.png&quot; sourcerect=&quot;64,0,64,64&quot; /&gt;</span></span><br><span class="line"><span class="comment">      &lt;SlotIcon slot=&quot;5&quot; texture=&quot;%ModDir%/UI/icons.png&quot; sourcerect=&quot;128,0,64,64&quot; /&gt;</span></span><br><span class="line"><span class="comment">    &lt;/SlotIcons&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- sloticons和index是错误的写法,正确写法请参考如下: --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SlotIcon</span> <span class="attr">slotindex</span>=<span class="string">&quot;0&quot;</span> <span class="attr">texture</span>=<span class="string">&quot;Content/UI/StatusMonitorUI.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;256,448,64,64&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SlotIcon</span> <span class="attr">slotindex</span>=<span class="string">&quot;1&quot;</span> <span class="attr">texture</span>=<span class="string">&quot;Content/UI/StatusMonitorUI.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;320,448,64,64&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SlotIcon</span> <span class="attr">slotindex</span>=<span class="string">&quot;2&quot;</span> <span class="attr">texture</span>=<span class="string">&quot;%ModDir%/UI/icons.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;192,0,64,64&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SlotIcon</span> <span class="attr">slotindex</span>=<span class="string">&quot;3&quot;</span> <span class="attr">texture</span>=<span class="string">&quot;%ModDir%/UI/icons.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;256,0,64,64&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SlotIcon</span> <span class="attr">slotindex</span>=<span class="string">&quot;4&quot;</span> <span class="attr">texture</span>=<span class="string">&quot;%ModDir%/UI/icons.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;64,0,64,64&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SlotIcon</span> <span class="attr">slotindex</span>=<span class="string">&quot;5&quot;</span> <span class="attr">texture</span>=<span class="string">&quot;%ModDir%/UI/icons.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;128,0,64,64&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;Contained items=&quot;smgammo,smallMagVGM,bigMagVGM,drumMagVGM&quot; hide=&quot;false&quot; itempos=&quot;-19,1&quot; rotation=&quot;-30&quot; /&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 请把Contained换成Containable --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;SubContainer capacity=&quot;1&quot; maxstacksize=&quot;1&quot; allowitems=&quot;smallAccessoryVGM,bigAccessoryVGM,light&quot; hideitems=&quot;false&quot; itempos=&quot;22,-2&quot; setactive=&quot;true&quot; type=&quot;LowerAccessory&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;StatusEffect type=&quot;OnContained&quot; target=&quot;This&quot; CheckConditionalAlways=&quot;true&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;Conditional Is=!&quot;tacAssaultRifleVGM&quot; /&gt;</span></span><br><span class="line"><span class="comment">        &lt;Remove /&gt;</span></span><br><span class="line"><span class="comment">      &lt;/StatusEffect&gt;</span></span><br><span class="line"><span class="comment">    &lt;/SubContainer&gt; --&gt;</span></span><br><span class="line">    subcontainer的写法存在错误,这里我给你留着第一行,你按照我的写法来做,所有的StatusEffect不需要生成,需要containable即可</span><br><span class="line">      <span class="tag">&lt;<span class="name">SubContainer</span> <span class="attr">capacity</span>=<span class="string">&quot;1&quot;</span> <span class="attr">maxstacksize</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Containable</span> <span class="attr">items</span>=<span class="string">&quot;smallAccessoryVGM,bigAccessoryVGM,light&quot;</span> <span class="attr">hide</span>=<span class="string">&quot;false&quot;</span> <span class="attr">itempos</span>=<span class="string">&quot;22,-1&quot;</span> <span class="attr">setactive</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Containable</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">SubContainer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SubContainer</span> <span class="attr">capacity</span>=<span class="string">&quot;1&quot;</span> <span class="attr">maxstacksize</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Containable</span> <span class="attr">items</span>=<span class="string">&quot;smallHandVGM,bigHandVGM&quot;</span> <span class="attr">hide</span>=<span class="string">&quot;false&quot;</span> <span class="attr">itempos</span>=<span class="string">&quot;22,-1&quot;</span> <span class="attr">setactive</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Containable</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">SubContainer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SubContainer</span> <span class="attr">capacity</span>=<span class="string">&quot;1&quot;</span> <span class="attr">maxstacksize</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Containable</span> <span class="attr">items</span>=<span class="string">&quot;smallMuzzleVGM,bigMuzzleVGM&quot;</span> <span class="attr">hide</span>=<span class="string">&quot;false&quot;</span> <span class="attr">itempos</span>=<span class="string">&quot;22,-1&quot;</span> <span class="attr">setactive</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Containable</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">SubContainer</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 枪托 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SubContainer</span> <span class="attr">capacity</span>=<span class="string">&quot;1&quot;</span> <span class="attr">maxstacksize</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Containable</span> <span class="attr">items</span>=<span class="string">&quot;smallStockVGM,bigStockVGM&quot;</span> <span class="attr">hide</span>=<span class="string">&quot;false&quot;</span> <span class="attr">itempos</span>=<span class="string">&quot;22,-1&quot;</span> <span class="attr">setactive</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Containable</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">SubContainer</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 上挂件 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SubContainer</span> <span class="attr">capacity</span>=<span class="string">&quot;1&quot;</span> <span class="attr">maxstacksize</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Containable</span> <span class="attr">items</span>=<span class="string">&quot;smallScopeVGM,bigScopeVGM&quot;</span> <span class="attr">hide</span>=<span class="string">&quot;false&quot;</span> <span class="attr">itempos</span>=<span class="string">&quot;22,-1&quot;</span> <span class="attr">setactive</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Containable</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">SubContainer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ItemContainer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Sprite</span> <span class="attr">texture</span>=<span class="string">&quot;Content/Items/Weapons/weapons_new.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;94,8,161,59&quot;</span> <span class="attr">depth</span>=<span class="string">&quot;0.55&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> <span class="attr">scale</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">InventoryIcon</span> <span class="attr">texture</span>=<span class="string">&quot;Content/Items/InventoryIconAtlas.png&quot;</span> <span class="attr">sourcerect</span>=<span class="string">&quot;94,8,161,59&quot;</span> <span class="attr">origin</span>=<span class="string">&quot;0.5,0.5&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Holdable</span> <span class="attr">slots</span>=<span class="string">&quot;Any,RightHand+LeftHand&quot;</span> <span class="attr">controlpose</span>=<span class="string">&quot;true&quot;</span> <span class="attr">holdpos</span>=<span class="string">&quot;40,-10&quot;</span> <span class="attr">aimpos</span>=<span class="string">&quot;45,-10&quot;</span> <span class="attr">handle1</span>=<span class="string">&quot;-30,-15&quot;</span> <span class="attr">handle2</span>=<span class="string">&quot;26,5&quot;</span> <span class="attr">holdangle</span>=<span class="string">&quot;-35&quot;</span> <span class="attr">msg</span>=<span class="string">&quot;ItemMsgPickUpSelect&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h3><p>好吧,Alpha阶段算是ok了,调试了2把武器和8个配件,接下来可以进入大批量生产阶段了,哦对了,我最好确认一下合成配方,Day6做差不多的时候再添加好了</p>
<h3 id="Day5"><a href="#Day5" class="headerlink" title="Day5"></a>Day5</h3><p>大规模生产的一天,今明两天可以把所有武器做完,不过我好像忘了做延长弹匣和弹鼓,今天还是先完成这个,并且进一步优化我的生成器好了、</p>
<p>本来想给弹匣设置一下影响枪械属性的，但是看到弹匣的原料后觉得没有必要，后勤和最大携带量已经足够了</p>
<p>我忘记给能上消音器的上aitarget标签了<br>另外得另起一个override文件,重写一下步枪的配方(可以在VGM加工台制作) 完工<br>得给所有涉及步枪镜的加个statuseffect 完工</p>
<h2 id="哪些做对了"><a href="#哪些做对了" class="headerlink" title="哪些做对了"></a>哪些做对了</h2><h3 id="在开发初期就认识到程序化生成对批量产出的重要性"><a href="#在开发初期就认识到程序化生成对批量产出的重要性" class="headerlink" title="在开发初期就认识到程序化生成对批量产出的重要性"></a>在开发初期就认识到程序化生成对批量产出的重要性</h3><p>简单算笔账：<br>	在Day4的时候，我把这个系统的核心代码实现给架构完成，整个mod一共10把武器16个配件，当我没有这个生成器的时候，在Day4做两个武器其实就花掉我半天时间，</p>
<p>那个XML生成器，其实就是为了枪械改装这个模组准备的，幸好我这次提前开始同时做这两个玩意儿，如果没有生成器，光是做两把武器就得花掉我半天时间。</p>
<p>生成器是在第五天完成的，而当我有了专门的XML生成器后，一天时间就完成了剩下的8个武器还有7个配件。开发的架构阶段很重要，要是搭好了，堆量阶段的效率甚至可以增加5倍。</p>
<h3 id="生成器和Mod同步开发修缮"><a href="#生成器和Mod同步开发修缮" class="headerlink" title="生成器和Mod同步开发修缮"></a>生成器和Mod同步开发修缮</h3><p>说实话，虽然XML生成器是全AI完成开发，但是AI开发≠不需要调试，前几天出的乱子也挺不少的，比如凭空生成游戏解析不了的格式、JS构造函数老是这里那里出问题等等。这种并行开发和迭代修正的策略，确保了工具的实用性，也让它输出的内容准确无误，避免了工具问题阻碍后续开发。</p>
<h3 id="先完成代码层面的机制，然后再进行大规模开发"><a href="#先完成代码层面的机制，然后再进行大规模开发" class="headerlink" title="先完成代码层面的机制，然后再进行大规模开发"></a>先完成代码层面的机制，然后再进行大规模开发</h3><p>这个实际上我之前在《远行星号》谈mod制作的时候有讲过，这里再放一下引用：</p>
<blockquote>
<p>没有美工、策划的电子游戏顶多不好玩，但没有程序的电子游戏会变得<strong>不能玩。</strong>  </p>
<p>做mod同理。<strong>建议上来就对着技术难关搞突破——哪一部分你觉得最难搞定，那一开始就搞它。别上来就搞策划案和文案，就我个人3次 gamejam 的经历，策划案与文案是最整个游戏开发最简单的内容。把最难的部分放到最后做会</strong>让mod的难产可能性直线上升。</p>
<p>我就算在这说了也会有人继续往这个坑踩，我以前也踩过：主要的客观原因是<strong>写策划</strong>是整个游戏开发中<strong>正反馈最即时的部分</strong>，其他开发环节通常会延后得到反馈——两案写爽的例子不在少数，但是写程序&#x2F;美工写爽的倒是挺少听到（那种爽也和写策划的不一样，更多的是一种折磨结束后的狂喜，而不是创作的快乐）。</p>
</blockquote>
<p>这回算是彻底避开了这个坑，没有又一次陷入策划写10w字，代码一点没动的问题当中</p>
<h3 id="终于学会如何使用AI看文档了"><a href="#终于学会如何使用AI看文档了" class="headerlink" title="终于学会如何使用AI看文档了"></a>终于学会如何使用AI看文档了</h3><p>以前听老程序员说，看文档不如看源代码。《潜渊症》的开发文档本身也是半程序化生成的，有很多细节照顾不到位。这回我尝试了使用哈吉米（谷歌Gemini 2.5 flash，主流大模型当中最容易和用户发生争论&#x2F;突发恶疾的一个因此得名）让它来帮我写一部分内容。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.神金.icu/20250727203352464.png" alt="image.png"></p>
<p>注意哈，我不是让它帮我搜索《潜渊症》的文档，我选择了先把游戏源脚本文件喂给它（StatusEffect.cs、Condintional.cs等）然后结合文档，问它一些更为细致的问题：比如OnInsert和OnRemove只能写在哪里哪里，某些子容器是否有限制等，事实证明这样使用AI比直接问它文档要准确得多，不容易出现AI幻觉的问题。</p>
<h2 id="哪些做错了"><a href="#哪些做错了" class="headerlink" title="哪些做错了"></a>哪些做错了</h2><h3 id="在Mod文件夹里初始化-git仓库"><a href="#在Mod文件夹里初始化-git仓库" class="headerlink" title="在Mod文件夹里初始化.git仓库"></a>在Mod文件夹里初始化.git仓库</h3><p>如果你的游戏有1G以上的大小，或者根本不在乎游戏的体积，git仓库那50mb的体积对大多数项目来说都不是个事儿。但是当你的mod本身只有2mb的时候，让其他人为了下2mb的东西就得顺带下个50m的.git就显得有些不厚道了。</p>
<p>所幸这个问题被我及时发现并替换掉，看来以后做Godot的时候也得注意一下这个问题：总不能打包成web发行版时顺带给版本管理程序打包进去不是，毕竟jam上支持在线试玩与否有时候是能决定试玩量的。</p>
<h3 id="没有使用fork来分化开发版和发行版"><a href="#没有使用fork来分化开发版和发行版" class="headerlink" title="没有使用fork来分化开发版和发行版"></a>没有使用fork来分化开发版和发行版</h3><p>在项目管理上，<strong>缺乏开发版和发行版的清晰分离</strong>是我需要改进的地方。我这次没有使用Git的<code>fork</code>机制，很可能意味着我的开发分支和主分支（或者说发行分支）没有明确的区分。这可能会导致一些问题：</p>
<ul>
<li><p><strong>发布风险：</strong> 直接在开发分支上修改并发布，很容易把那些没完成、没测试的功能或者Bug一起打包发布出去，影响用户体验。</p>
</li>
<li><p><strong>版本混乱：</strong> 我很难清晰地追踪哪些提交是针对开发中的功能，哪些是已发布版本的修复或更新，导致版本回溯和管理变得复杂。</p>
</li>
<li><p><strong>协作不便：</strong> 如果未来有团队协作，这种模式会让多人开发变得一团糟，很容易产生代码冲突。</p>
</li>
</ul>
<p>我以后应该这样做：保持一个稳定的**主分支（main&#x2F;master）<strong>作为发行版本，而所有的功能开发、Bug修复都在</strong>开发分支（develop）**或者特性分支上进行。当开发内容成熟并经过充分测试后，再把开发分支合并到主分支，然后打上版本标签进行发布。这样可以确保发行版本的稳定性和质量，也方便我管理和回溯版本。</p>
<h3 id="版本控制函待全自动化"><a href="#版本控制函待全自动化" class="headerlink" title="版本控制函待全自动化"></a>版本控制函待全自动化</h3><p>尽管我已经使用了Git进行版本控制，但看起来我的**版本控制流程还不够自动化。在未来，最好尝试一下以下内容：</p>
<ul>
<li><p>在我把代码提交到特定分支后，自动触发构建、测试。</p>
</li>
<li><p>在满足发布条件时（例如，合并到主分支），自动创建版本标签。</p>
</li>
<li><p>自动把我编译好的Mod文件打包，并上传到指定的分发平台或存储位置。</p>
</li>
</ul>
<p>自动化可以大大减少我的人为错误，提高发布效率和质量，让我能更专注于开发本身。</p>
<h3 id="（开发日志写得比较混乱）"><a href="#（开发日志写得比较混乱）" class="headerlink" title="（开发日志写得比较混乱）"></a>（开发日志写得比较混乱）</h3><p>我不知道这算不算个问题，不过你也能看到我这一周基本是把开发日志当作随手笔记来写，我好像听说开发日志最好正规并且八股文一点？</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%8D%E7%9B%98/">复盘</a><a class="post-meta__tags" href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/">游戏开发</a></div><div class="post-share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.4/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/05/01/%E6%9E%84%E5%BB%BA%E5%9F%BA%E4%BA%8E%20Obsidian%20+%20Hexo%20+%20Github%20%E7%9A%84%E9%9B%B6%E5%B9%B2%E6%89%B0%E5%86%99%E4%BD%9C%E7%8E%AF%E5%A2%83/" title="构建基于 Obsidian + Hexo + Github 的零干扰写作环境"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">构建基于 Obsidian + Hexo + Github 的零干扰写作环境</div></div><div class="info-2"><div class="info-item-1"> 我喜欢写东西，我也喜欢捣鼓程序和代码，但我不喜欢在编程环境下写东西，也不喜欢在非编程环境下操作代码。  但是搭建博客本身就需要使用nodejs，避不开的就是“编程环境”。花了两天时间捣鼓后，我琢磨出来能将一个终端环境与写作环境彻底分离的博客搭建方案，能给 “强迫症站长” 提供一种几乎零干扰的博客写作体验——一键生成，将注意力只专注于写作上。 具体来说，本实践实现了三大核心目标：  在Obsidian中完成写作-配置-发布全流程，不需要额外呼出终端  自动化处理 元数据生成&#x2F;图床上传&#x2F;部署发布  在满足前两点的基础上，保持Hexo原生功能完整性   参考指南：如何让图片安详地躺在床上 - HexoHexo + Obsidian + Git 完美的博客部署与编辑方案 - 个人文章 - SegmentFault 思否使用Hexo+Github+Obsidian搭建博客并实现多端同步 - Shiki Hexo 部署需要预先准备好Node js 和 Git 对于这两个东西的安装，可以参考Hexo官网的步骤：   Git的安装Node.js的安装  安装 Hexo...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">15x3</div><div class="author-info-description">由杏仁核漏电的类人大脑驱动</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/15x3"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="hn hn-numbered-list"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97"><span class="toc-number">1.</span> <span class="toc-text">开发日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Day1"><span class="toc-number">1.1.</span> <span class="toc-text">Day1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Day2"><span class="toc-number">1.2.</span> <span class="toc-text">Day2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Day3"><span class="toc-number">1.3.</span> <span class="toc-text">Day3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Day4"><span class="toc-number">1.4.</span> <span class="toc-text">Day4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Day5"><span class="toc-number">1.5.</span> <span class="toc-text">Day5</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%AA%E4%BA%9B%E5%81%9A%E5%AF%B9%E4%BA%86"><span class="toc-number">2.</span> <span class="toc-text">哪些做对了</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%BC%80%E5%8F%91%E5%88%9D%E6%9C%9F%E5%B0%B1%E8%AE%A4%E8%AF%86%E5%88%B0%E7%A8%8B%E5%BA%8F%E5%8C%96%E7%94%9F%E6%88%90%E5%AF%B9%E6%89%B9%E9%87%8F%E4%BA%A7%E5%87%BA%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-number">2.1.</span> <span class="toc-text">在开发初期就认识到程序化生成对批量产出的重要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E5%92%8CMod%E5%90%8C%E6%AD%A5%E5%BC%80%E5%8F%91%E4%BF%AE%E7%BC%AE"><span class="toc-number">2.2.</span> <span class="toc-text">生成器和Mod同步开发修缮</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E5%AE%8C%E6%88%90%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E7%9A%84%E6%9C%BA%E5%88%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E8%BF%9B%E8%A1%8C%E5%A4%A7%E8%A7%84%E6%A8%A1%E5%BC%80%E5%8F%91"><span class="toc-number">2.3.</span> <span class="toc-text">先完成代码层面的机制，然后再进行大规模开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%88%E4%BA%8E%E5%AD%A6%E4%BC%9A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8AI%E7%9C%8B%E6%96%87%E6%A1%A3%E4%BA%86"><span class="toc-number">2.4.</span> <span class="toc-text">终于学会如何使用AI看文档了</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%AA%E4%BA%9B%E5%81%9A%E9%94%99%E4%BA%86"><span class="toc-number">3.</span> <span class="toc-text">哪些做错了</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8Mod%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E5%88%9D%E5%A7%8B%E5%8C%96-git%E4%BB%93%E5%BA%93"><span class="toc-number">3.1.</span> <span class="toc-text">在Mod文件夹里初始化.git仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8fork%E6%9D%A5%E5%88%86%E5%8C%96%E5%BC%80%E5%8F%91%E7%89%88%E5%92%8C%E5%8F%91%E8%A1%8C%E7%89%88"><span class="toc-number">3.2.</span> <span class="toc-text">没有使用fork来分化开发版和发行版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%87%BD%E5%BE%85%E5%85%A8%E8%87%AA%E5%8A%A8%E5%8C%96"><span class="toc-number">3.3.</span> <span class="toc-text">版本控制函待全自动化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97%E5%86%99%E5%BE%97%E6%AF%94%E8%BE%83%E6%B7%B7%E4%B9%B1%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">（开发日志写得比较混乱）</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="hn hn-tech-stories"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/27/%E5%BC%80%E5%8F%91%E5%A4%8D%E7%9B%98%EF%BC%9A%E4%B8%80%E5%91%A8%E4%B8%A4%E4%B8%AAMod%EF%BC%8C%E5%93%AA%E4%BA%9B%E4%BA%8B%E6%83%85%E5%81%9A%E5%AF%B9%E4%BA%86%EF%BC%8C%E5%93%AA%E4%BA%9B%E5%81%9A%E9%94%99%E4%BA%86/" title="开发复盘：一周两个Mod，哪些事情做对了，哪些做错了">开发复盘：一周两个Mod，哪些事情做对了，哪些做错了</a><time datetime="2025-07-26T20:37:10.000Z" title="发表于 2025-07-27 04:37:10">2025-07-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/01/%E6%9E%84%E5%BB%BA%E5%9F%BA%E4%BA%8E%20Obsidian%20+%20Hexo%20+%20Github%20%E7%9A%84%E9%9B%B6%E5%B9%B2%E6%89%B0%E5%86%99%E4%BD%9C%E7%8E%AF%E5%A2%83/" title="构建基于 Obsidian + Hexo + Github 的零干扰写作环境">构建基于 Obsidian + Hexo + Github 的零干扰写作环境</a><time datetime="2025-05-01T03:59:59.000Z" title="发表于 2025-05-01 11:59:59">2025-05-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 15x3</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5 </a><a href="https://icp.gov.moe/?keyword=20251550" target="_blank">萌ICP备20251550号</a></div><div class="footer_custom_text">Powered by Github Pages & Tencent Cloud</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="hn hn-newspaper-solid"> </i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="hn hn-moon-solid"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="hn hn-bullet-list-solid"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="hn hn-cog-solid"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="hn hn-bullet-list-solid"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="hn hn-arrow-up-solid"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/19.1.3/lazyload.iife.min.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="1843870503" data-server="netease" data-type="song" data-fixed="true" data-autoplay="false" data-lrctype="0"> </div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.4/fireworks.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.4/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false 
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>